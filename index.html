<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fahrul Ikhsan Hidayatullah</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&family=Poppins:wght@300&display=swap"
      rel="stylesheet"
    />
    <!-- ICON -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- CSS File -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <link
      href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
      rel="stylesheet"
    />
    <link href="assets/css/beranda.css" rel="stylesheet" />

    <link rel="icon" type="image/png" href="assets/img/logoulm.png" />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  </head>
  <body>
    <!-- Header -->
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <!-- Konten lainnya -->

        <!-- Ikon Mute/Unmute -->
        <div id="audio-control">
          <i id="audio-icon" class="bi bi-volume-up"></i>
        </div>
        <div class="middle-element mx-auto">
          <nav id="navbar" class="navbar">
            <ul>
              <li>
                <a class="nav-link scrollto active" href="#beranda">
                  <span class="bx bxs-home"></span>Home
                </a>
              </li>
              <li>
                <a class="nav-link scrollto" href="#menu">
                  <i class="bx bxs-leaf"></i>Portofolio</a
                >
              </li>
              <li>
                <a class="nav-link scrollto" href="#tentang">
                  <i class="bi bi-person-lines-fill"></i>
                  Forum</a
                >
              </li>
            </ul>
          </nav>
        </div>
        <!-- <button id="logoutBtn" class="keluar-btn">
          <i class="fa-solid fa-right-from-bracket"></i>
          <a> Keluar </a>
        </button> -->
      </div>

      <!-- Elemen Audio -->
      <audio id="background-audio" autoplay loop>
        <source src="assets/audio/lukissenja.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
      </audio>
    </header>

    <!-- Beranda -->
    <section id="beranda">
      <div class="beranda-container">
        <div class="bg-hal1">
          <h1 style="font-weight: bold; color: #808080">Hello!</h1>
          <!-- <p>Media Pembelajaran Interaktif</p> -->
          <h2 class="index-judul">FAHRUL IKHSAN HIDAYATULLAH</h2>
          <p style="color: #90a5bb; margin-bottom: 2px">
            Computer Education (2019-2024)
          </p>
          <p>Front-End Developer, Graphic Designer.</p>
          <div class="bgmenu">
            <a href="#menu">
              <div class="btn-mulai" title="">See more</div>
            </a>
            <a href="#tentang">
              <div class="btn-mulai" title="">Message</div>
            </a>
          </div>
          <div class="carousel-item">
            <img src="assets/img/logoulm.png" alt="Project 1" />
            <h3>Project Title 1</h3>
            <p>Short description of the project.</p>
          </div>
          <div id="map"></div>
        </div>
      </div>
    </section>

    <!-- Menu -->
    <section id="menu">
      <div class="row">
        <div class="kotakmn">
          <img src="assets/img/logoulm.png" alt="Project 1" />
          <h4>Study</h4>
          <h6>Computer Edu.</h6>
          <a href="https://ulm.ac.id/id/"> <button>Buka</button></a>
        </div>

        <div class="kotakmn2">
          <img src="assets/img/ig.png" alt="Project 1" />

          <h4>Instagram</h4>
          <h6>2fhrl</h6>
          <a href="https://www.instagram.com/2fhrl/"> <button>Buka</button></a>
        </div>
        <div class="kotakmn3">
          <img src="assets/img/yt.png" alt="Project 1" />

          <h4>Youtube</h4>
          <h6>fahrulikhsanhidayatullah</h6>
          <a
            href="https://youtube.com/@fahrulikhsanhidayatullah?si=qifvb0AomNeQNUn_"
          >
            <button>Buka</button></a
          >
        </div>

        <div class="kotakmn4">
          <img src="assets/img/github.png" alt="Project 1" />

          <h4>Github</h4>

          <a href="#menu"><button>Buka</button></a>
        </div>
        <div class="kotakmn5">
          <h4>Coming soon</h4>

          <a href="#menu"><button>Buka</button></a>
        </div>
      </div>
    </section>

    <!-- Tentang -->
    <section id="tentang" class="padd-section text-center">
      <div class="container" data-aos="fade-up">
        <div class="aboutme">
          <div id="commentSection">
            <form id="commentForm">
              <input type="text" id="nameInput" placeholder="Nama" required />
              <textarea
                id="messageInput"
                placeholder="Pesan"
                required
              ></textarea>
              <button type="submit">Kirim Pesan</button>
            </form>

            <div id="commentsDisplay">
              <!-- Komentar akan ditampilkan di sini -->
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- JS File -->
    <script src=" https://unpkg.com/sweetalert/dist/sweetalert.min.js "></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script>
      (function () {
        "use strict";

        /**
         * Easy selector helper function
         */
        const select = (el, all = false) => {
          el = el.trim();
          if (all) {
            return [...document.querySelectorAll(el)];
          } else {
            return document.querySelector(el);
          }
        };

        /**
         * Easy event listener function
         */
        const on = (type, el, listener, all = false) => {
          let selectEl = select(el, all);
          if (selectEl) {
            if (all) {
              selectEl.forEach((e) => e.addEventListener(type, listener));
            } else {
              selectEl.addEventListener(type, listener);
            }
          }
        };

        /**
         * Scroll
         */
        const onscroll = (el, listener) => {
          el.addEventListener("scroll", listener);
        };

        /**
         * NavBar Active
         */
        let navbarlinks = select("#navbar .scrollto", true);
        const navbarlinksActive = () => {
          let position = window.scrollY + 300;
          navbarlinks.forEach((navbarlink) => {
            if (!navbarlink.hash) return;
            let section = select(navbarlink.hash);
            if (!section) return;
            if (
              position >= section.offsetTop &&
              position <= section.offsetTop + section.offsetHeight
            ) {
              navbarlink.classList.add("active");
            } else {
              navbarlink.classList.remove("active");
            }
          });
        };
        window.addEventListener("load", navbarlinksActive);
        onscroll(document, navbarlinksActive);

        /**
         * Smoot header
         */
        let selectHeader = select("#header");
        if (selectHeader) {
          const headerScrolled = () => {
            if (window.scrollY > 300) {
              selectHeader.classList.add("header-scrolled");
            } else {
              selectHeader.classList.remove("header-scrolled");
            }
          };
          window.addEventListener("load", headerScrolled);
          onscroll(document, headerScrolled);
        }
      })();
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var audio = document.getElementById("background-audio");
        var audioIcon = document.getElementById("audio-icon");

        // Mute/Unmute saat ikon diklik
        document
          .getElementById("audio-control")
          .addEventListener("click", function () {
            if (audio.paused) {
              audio.play();
              audioIcon.classList.remove("bi-volume-mute");
              audioIcon.classList.add("bi-volume-up");
            } else {
              audio.pause();
              audioIcon.classList.remove("bi-volume-up");
              audioIcon.classList.add("bi-volume-mute");
            }
          });

        // Mulai audio setelah interaksi pengguna
        document.addEventListener(
          "click",
          function () {
            if (audio.paused) {
              audio.play();
            }
          },
          { once: true }
        );

        document.addEventListener(
          "scroll",
          function () {
            if (audio.paused) {
              audio.play();
            }
          },
          { once: true }
        );
      });
    </script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Membuat peta baru dan mengatur pusatnya di Indonesia
      var map = L.map("map").setView([-2.5, 118.0], 4); // Koordinat pusat Indonesia

      // Menggunakan tile layer dari OpenStreetMap
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      // Menambahkan marker di Indonesia
      var marker = L.marker([-2.0, 118.0]).addTo(map);
      marker.bindPopup("<b>Indonesia</b><br>").openPopup();
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
        set,
        onValue,
        orderByChild,
        query,
      } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAJ3xEFNCiJn9B9vlr5wxSlFuDxmFPfke0",
        authDomain: "webpribadi-2fe47.firebaseapp.com",
        databaseURL: "https://webpribadi-2fe47-default-rtdb.firebaseio.com",
        projectId: "webpribadi-2fe47",
        storageBucket: "webpribadi-2fe47.appspot.com",
        messagingSenderId: "818239815637",
        appId: "1:818239815637:web:eea1245da8394444f3875c",
        measurementId: "G-WWMQDJ5BSN",
      };

      // Inisialisasi Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // Mendapatkan referensi ke form dan kolom input
      const commentForm = document.getElementById("commentForm");
      const nameInput = document.getElementById("nameInput");
      const messageInput = document.getElementById("messageInput");
      const commentsDisplay = document.getElementById("commentsDisplay");

      // Fungsi untuk menyimpan komentar ke Firebase
      commentForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const name = nameInput.value;
        const message = messageInput.value;

        if (name && message) {
          // Simpan ke Firebase dengan timestamp
          const newCommentRef = push(ref(database, "comments"));
          set(newCommentRef, {
            name: name,
            message: message,
            timestamp: Date.now(),
          }).then(() => {
            // Tampilkan pop-up SweetAlert
            Swal.fire({
              icon: "success",
              title: "Berhasil!",
              text: "Pesan Anda telah terkirim!",
              showConfirmButton: false,
              timer: 2000,
            });

            // Reset form
            nameInput.value = "";
            messageInput.value = "";
          });
        }
      });

      // Fungsi untuk mengonversi timestamp menjadi format tanggal yang lebih ramah
      function formatTimestamp(timestamp) {
        const date = new Date(timestamp);
        const day = String(date.getDate()).padStart(2, "0");
        const month = String(date.getMonth() + 1).padStart(2, "0"); // Bulan dimulai dari 0
        const year = date.getFullYear();
        const hours = String(date.getHours()).padStart(2, "0");
        const minutes = String(date.getMinutes()).padStart(2, "0");

        return `${day}/${month}/${year} ${hours}:${minutes}`;
      }

      // Fungsi untuk mengambil dan menampilkan komentar dari Firebase
      const commentsRef = query(
        ref(database, "comments"),
        orderByChild("timestamp")
      );
      onValue(commentsRef, (snapshot) => {
        commentsDisplay.innerHTML = ""; // Hapus komentar yang sudah ada
        const comments = [];
        snapshot.forEach((childSnapshot) => {
          const comment = childSnapshot.val();
          const formattedTime = formatTimestamp(comment.timestamp);
          comments.unshift(
            `<div class="timestamp">${formattedTime}</div>
       <div class="comment"> <strong>${comment.name}:</strong> ${comment.message} 
        
      </div>`
          );
        });
        commentsDisplay.innerHTML = comments.join("");
      });
    </script>
  </body>
</html>
